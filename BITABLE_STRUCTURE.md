# 飞书多维表格结构说明

## 📊 表格概述

飞书任务机器人需要两个数据表来存储任务和人员信息：

1. **Tasks** - 任务表
2. **Persons** - 人员表

## 📋 Tasks 表结构

### 字段列表

| 字段名 | 字段类型 | 说明 | 选项值 |
|--------|----------|------|--------|
| 任务标题 | 单行文本 | 任务的标题 | - |
| 任务描述 | 多行文本 | 任务的详细描述 | - |
| 任务类型 | 单选 | 任务的分类 | 代码开发、测试、文档、设计、其他 |
| 优先级 | 单选 | 任务的优先级 | 高、中、低 |
| 状态 | 单选 | 任务的当前状态 | Draft、Assigned、InProgress、Done、Returned |
| 承接人 | 单行文本 | 承接任务的人员姓名 | - |
| 发布人 | 单行文本 | 发布任务的人员姓名 | - |
| 技能要求 | 多选 | 完成任务所需的技能 | Python、JavaScript、Java、Go、React、Vue、数据库、DevOps、UI设计、测试 |
| 预估工时 | 数字 | 预估完成时间（小时） | - |
| 截止时间 | 日期时间 | 任务的截止时间 | - |
| 创建时间 | 创建时间 | 任务创建的时间 | - |
| 更新时间 | 最后修改时间 | 任务最后更新的时间 | - |
| 任务链接 | 网址 | 相关的链接（如GitHub PR） | - |
| CI状态 | 单选 | CI/CD的状态 | Success、Failed、Pending、Unknown |

### 创建步骤

1. 在多维表格中点击"新建数据表"
2. 表名设置为：`Tasks`
3. 按照上表逐个添加字段
4. 对于单选和多选字段，需要添加对应的选项值

## 👥 Persons 表结构

### 字段列表

| 字段名 | 字段类型 | 说明 | 选项值 |
|--------|----------|------|--------|
| 姓名 | 单行文本 | 人员姓名 | - |
| 用户ID | 单行文本 | 飞书用户ID | - |
| 邮箱 | 邮箱 | 人员邮箱地址 | - |
| 技能标签 | 多选 | 人员掌握的技能 | Python、JavaScript、Java、Go、React、Vue、数据库、DevOps、UI设计、测试 |
| 可用状态 | 单选 | 人员当前状态 | 可用、忙碌、请假 |
| 工作负载 | 数字 | 当前工作负载（1-10） | - |
| 历史评分 | 数字 | 历史任务完成评分（0-100） | - |
| 完成任务数 | 数字 | 历史完成的任务数量 | - |
| 活跃度 | 数字 | 用户活跃度评分（0-100） | - |
| 加入时间 | 创建时间 | 加入团队的时间 | - |
| 最后活跃 | 最后修改时间 | 最后活跃时间 | - |

### 创建步骤

1. 在多维表格中点击"新建数据表"
2. 表名设置为：`Persons`
3. 按照上表逐个添加字段
4. 对于多选字段，添加技能选项值

## 🎨 字段配置详情

### 单选字段配置

#### 任务类型
- 代码开发 (颜色：蓝色)
- 测试 (颜色：绿色)
- 文档 (颜色：黄色)
- 设计 (颜色：紫色)
- 其他 (颜色：灰色)

#### 优先级
- 高 (颜色：红色)
- 中 (颜色：橙色)
- 低 (颜色：绿色)

#### 任务状态
- Draft (颜色：灰色)
- Assigned (颜色：蓝色)
- InProgress (颜色：橙色)
- Done (颜色：绿色)
- Returned (颜色：红色)

#### CI状态
- Success (颜色：绿色)
- Failed (颜色：红色)
- Pending (颜色：橙色)
- Unknown (颜色：灰色)

#### 可用状态
- 可用 (颜色：绿色)
- 忙碌 (颜色：红色)
- 请假 (颜色：橙色)

### 多选字段配置

#### 技能标签（Tasks和Persons表通用）
- Python (颜色：蓝色)
- JavaScript (颜色：黄色)
- Java (颜色：红色)
- Go (颜色：青色)
- React (颜色：蓝色)
- Vue (颜色：绿色)
- 数据库 (颜色：紫色)
- DevOps (颜色：橙色)
- UI设计 (颜色：粉色)
- 测试 (颜色：灰色)

## 📝 示例数据

### Tasks 表示例数据

| 任务标题 | 任务描述 | 任务类型 | 优先级 | 状态 | 技能要求 | 预估工时 |
|----------|----------|----------|--------|------|----------|----------|
| 优化数据库查询性能 | 分析并优化用户查询接口的数据库性能 | 代码开发 | 高 | Draft | Python, 数据库 | 8 |
| 前端页面重构 | 使用React重构用户管理页面 | 代码开发 | 中 | Draft | JavaScript, React | 16 |

### Persons 表示例数据

| 姓名 | 用户ID | 邮箱 | 技能标签 | 可用状态 | 工作负载 | 历史评分 |
|------|--------|------|----------|----------|----------|----------|
| 张三 | user_001 | zhangsan@example.com | Python, 数据库 | 可用 | 3 | 85 |
| 李四 | user_002 | lisi@example.com | JavaScript, React, Vue | 可用 | 2 | 92 |
| 王五 | user_003 | wangwu@example.com | Java, DevOps | 忙碌 | 5 | 88 |

## 🔧 配置完成后

1. **获取表格ID**：
   - 在每个表格的设置中可以找到表格ID
   - 或者通过URL获取：`https://feishu.cn/base/{app_token}/table/{table_id}`

2. **权限设置**：
   - 确保机器人应用有读写多维表格的权限
   - 在飞书开放平台的应用管理中配置权限

3. **测试连接**：
   - 配置完成后可以运行测试脚本验证连接

## 🚀 快速创建

如果您想快速创建表格结构，可以：

1. 使用快速配置向导：
   ```bash
   conda activate feishu
   python quick_setup.py
   ```

2. 或者手动在飞书多维表格中按照上述结构创建

创建完成后，将多维表格的 App Token 添加到 `.env.production` 配置文件中。
